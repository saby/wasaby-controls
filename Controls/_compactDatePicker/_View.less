.controls-CompactDatePicker__container {
   height: 100%;
}

.controls-CompactDatePicker_background {
   &-unaccented {
      background-color: var(--unaccented_background-color);
   }

   &-active {
      background-color: var(--active_background-color);
   }
}

.controls-MonthViewVDOM__item_style-CompactDatePickerItem {
   box-sizing: border-box;
   font-size: var(--font-size_l);
}

.controls-CompactDatePicker {
   display: flex;
   max-height: inherit;
   height: inherit;
   flex-direction: column;
   border-radius: var(--border-radius_s);
   box-sizing: border-box;
}

.controls-CompactDatePicker__header__today__container {
   right: var(--offset_st);
   top: calc(var(--offset_s) + var(--offset_2xs));
}

.controls-CompactDatePicker__header__close-button__container,
.controls-CompactDatePicker__header__today__container {
   display: flex;
   justify-content: center;
   position: absolute;
}

.controls-CompactDatePicker__popup {
   .controls-CompactDatePicker__container {
      padding-bottom: var(--offset_st);
   }

   .controls-CompactDatePicker__shadow {
      box-shadow: var(--shadow_a);
   }

   .controls-CompactDatePicker__header__today__container {
      right: var(--offset_xl);
   }
}

.controls-CompactDatePicker__header {
   position: relative;
   height: calc(
      2 * var(--inline_height_m) + var(--offset_st) + var(--offset_2xs)
   );
   box-sizing: border-box;
   flex-shrink: 0;
}

.controls-CompactDatePicker__header__border-visible {
   border-bottom: var(--border-thickness) solid var(--shadow-color_c);
}

.controls-CompactDatePicker__header__top-layer {
   margin-top: var(--offset_s);
   margin-bottom: var(--offset_2xs);
   height: var(--inline_height_m);
   display: flex;
   justify-content: center;
   align-items: center;
}

.controls-CompactDatePicker__month-list__item__header__size-m {
   height: calc(
      var(--calendar_item-size_m_compactDatePicker) - 2 * var(--offset_st)
   );
}

.controls-CompactDatePicker__month-list__item__header__size-l {
   height: calc(
      var(--calendar_item-size_l_compactDatePicker) - 2 * var(--offset_st)
   );
}

.controls-CompactDatePicker__month-list__item__header,
.controls-CompactDatePicker__header__month {
   margin-bottom: calc(-1 * var(--offset_2xs));
   font-weight: bold;
   font-size: var(--font-size_2xl);
   display: flex;
   justify-content: center;
   align-items: center;
}

.controls-CompactDatePicker__month-list__item__header {
   margin-top: var(--offset_st);
   margin-bottom: var(--offset_s);
}

.controls-CompactDatePicker__header__close-button__container {
   right: var(--offset_s);
}

.controls-CompactDatePicker__header__today {
   font-size: var(--font-size_l);
   padding: 0 var(--offset_2xs);
   cursor: pointer;
   color: var(--brand_color);
   box-sizing: border-box;
   border-top: var(--border-thickness) solid var(--brand_color);
   display: flex;
   justify-content: center;
   align-items: center;
}

.controls-CompactDatePicker__header__today_hidden {
   visibility: hidden;
}

.controls-CompactDatePicker__header__weekdays {
   height: var(--inline_height_m);
   margin-left: var(--offset_l);
   margin-right: var(--offset_l);
   display: flex;
   justify-content: space-between;
   align-items: center;
}

.controls-CompactDatePicker__header__weekdays__weekend {
   color: var(--primary_text-color);
}

.controls-CompactDatePicker__header__weekdays__workday {
   color: var(--unaccented_text-color);
}

.controls-CompactDatePicker__month-list {
   width: 100%;
   height: 100%;
}

.controls-CompactDatePicker__month-list_height__size-m {
   max-height: calc(
      8 *
         (
            var(--calendar_item-size_m_compactDatePicker) + 2 *
               var(--border-thickness)
         ) + var(--offset_st) + var(--offset_s) + 2 * var(--border-thickness)
   );
}

.controls-CompactDatePicker__month-list_height__size-l {
   max-height: calc(
      8 *
         (
            var(--calendar_item-size_l_compactDatePicker) + 2 *
               var(--border-thickness)
         ) + var(--offset_st) + var(--offset_s) + 2 * var(--border-thickness)
   );
}

.controls-CompactDatePicker__month-list__item {
   margin-left: var(--offset_2xs);
   margin-bottom: var(--offset_3xs);
   margin-top: var(--border-thickness);
}

.controls-MonthView__textColor-currentMonthDay-weekend_style-CompactDatePickerItem {
   color: var(--unaccented_text-color);
}

.controls-MonthView__backgroundColor-currentMonthDay-selected_style-CompactDatePickerItem,
.controls-MonthView__item-border-start_style-CompactDatePickerItem,
.controls-MonthView__item-border-end_style-CompactDatePickerItem,
.controls-MonthView__item-border-start-end_style-CompactDatePickerItem {
   margin-left: 0;
   margin-right: 0;
}

.controls-MonthView__backgroundColor-currentMonthDay-selected_style-CompactDatePickerItem,
.controls-MonthView__backgroundColor-currentMonthDay-selected-base_style-CompactDatePickerItem,
.controls-MonthView__backgroundColor-currentMonthDay-selected-end_style-CompactDatePickerItem,
.controls-MonthView__backgroundColor-currentMonthDay-selected-start_style-CompactDatePickerItem,
.controls-MonthView__backgroundColor-currentMonthDay-selected-end-unfinished_style-CompactDatePickerItem,
.controls-MonthView__backgroundColor-currentMonthDay-selected-start-unfinished_style-CompactDatePickerItem {
   background: var(--background-color);
}

.controls-MonthView__textColor-currentMonthDay-today_style-CompactDatePickerItem {
   position: relative;
   cursor: pointer;

   &::before {
      content: '';
      position: absolute;
      z-index: 1;
      box-sizing: border-box;
      border-radius: 50%;
      border: 1.5px solid var(--brand_color);
   }
}

.controls-MonthView__backgroundColor-currentMonthDay-selected-base_style-CompactDatePickerItem::before,
.controls-MonthView__backgroundColor-currentMonthDay-selected-start_style-CompactDatePickerItem::before,
.controls-MonthView__backgroundColor-currentMonthDay-selected-end_style-CompactDatePickerItem::before,
.controls-MonthView__backgroundColor-currentMonthDay-selected-startend-unfinished_style-CompactDatePickerItem::before,
.controls-MonthView__backgroundColor-currentMonthDay-selected-startend_style-CompactDatePickerItem::before {
   content: attr(date);
   position: absolute;
   border-radius: 50%;
   color: var(--item_selected_text-color);
   background: var(--item_selected_color);
   display: flex;
   justify-content: center;
   align-items: center;
}

.controls-CompactDatePicker__month-list__item-edge-start {
   border-top-left-radius: 50%;
   border-bottom-left-radius: 50%;
}

.controls-CompactDatePicker__month-list__item-edge-end {
   border-top-right-radius: 50%;
   border-bottom-right-radius: 50%;
}

.controls-CompactDatePicker_item_border-start_rounded {
   border-top-left-radius: 50%;
   border-bottom-left-radius: 50%;
}

.controls-CompactDatePicker_item_border-start {
   border-top-left-radius: 50%;
}

.controls-MonthViewVDOM__item-selected {
   &.controls-MonthView_item_border-top-left-radius__style-CompactDatePickerItem {
      border-top-left-radius: 50%;
   }

   &.controls-MonthView_item_border-top-right-radius__style-CompactDatePickerItem {
      border-top-right-radius: 50%;
   }

   &.controls-MonthView_item_border-bottom-left-radius__style-CompactDatePickerItem {
      border-bottom-left-radius: 50%;
   }

   &.controls-MonthView_item_border-bottom-right-radius__style-CompactDatePickerItem {
      border-bottom-right-radius: 50%;
   }
}

.controls-CompactDatePicker_notHovered {
   .controls-MonthViewVDOM__item-selected {
      &.controls-MonthView_item_border-top__style-CompactDatePickerItem {
         padding-bottom: var(--border-thickness);
         border-top: var(--border-thickness) solid
            var(--unaccented_hover_border-color);
      }

      &.controls-MonthView_item_border-bottom__style-CompactDatePickerItem {
         padding-top: var(--border-thickness);
         border-bottom: var(--border-thickness) solid
            var(--unaccented_hover_border-color);
      }

      &.controls-MonthView_item_border-left__style-CompactDatePickerItem {
         padding-right: var(--border-thickness);
         border-left: var(--border-thickness) solid
            var(--unaccented_hover_border-color);
      }

      &.controls-MonthView_item_border-right__style-CompactDatePickerItem {
         padding-left: var(--border-thickness);
         border-right: var(--border-thickness) solid
            var(--unaccented_hover_border-color);
      }
   }
}

.controls-MonthView__item-border-start-end_style-CompactDatePickerItem {
   background: var(--background-color);
}

.controls-MonthView__backgroundColor-currentMonthDay-selected-startend-unfinished_style-CompactDatePickerItem {
   background: none;
}

.controls-MonthView__border-currentMonthDay-unselected_style-CompactDatePickerItem {
   border-radius: 50%;
}

.controls-MonthView__textColor-currentMonthDay-today-readOnly-dayNotAvailable_style-CompactDatePickerItem,
.controls-MonthView__textColor-currentMonthDay-weekend-readOnly-dayNotAvailable_style-CompactDatePickerItem,
.controls-MonthView__textColor-currentMonthDay-workday-readOnly-dayNotAvailable_style-CompactDatePickerItem,
.controls-MonthView__textColor-currentMonthDay-today-readOnly_style-CompactDatePickerItem,
.controls-MonthView__textColor-currentMonthDay-weekend-readOnly_style-CompactDatePickerItem,
.controls-MonthView__textColor-currentMonthDay-workday-readOnly_style-CompactDatePickerItem {
   color: var(--readonly_color);
}

.controls-Scroll__shadow_top_style-CompactDatePicker {
   // Нам нужен градиент переходящий в прозрачный цвет, поэтому переменная не нужна
   background: linear-gradient(
      to bottom,
      var(--shadow-color_c),
      rgba(255, 255, 255, 0)
   );
}

.controls-CompactDatePicker__selector-margin {
   margin-top: calc(-1 * var(--offset_s));
   margin-left: calc(
      -1 * (
            7 *
               (
                  var(--calendar_item-size_m_compactDatePicker) + 2 *
                     var(--border-thickness)
               ) + 2 * var(--offset_l)
         ) / 3
   );
}

.controls-CompactDatePicker__size-m {
   width: calc(
      7 * var(--calendar_item-size_m_compactDatePicker) + 2 * var(--offset_2xs)
   );

   .controls-MonthViewVDOM__item_style-CompactDatePickerItem {
      width: var(--calendar_item-size_m_compactDatePicker);
      height: var(--calendar_item-size_m_compactDatePicker);
   }

   .controls-MonthViewVDOM__item-border_style-CompactDatePickerItem:hover,
   .controls-MonthView__border-currentMonthDay-unselected_style-CompactDatePickerItem:hover,
   .controls-MonthView__textColor-currentMonthDay-today_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-base_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-start_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-end_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-startend-unfinished_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-startend_style-CompactDatePickerItem {
      &::before {
         width: calc(
            var(--calendar_item-size_m_compactDatePicker) - 2 *
               var(--border-thickness)
         );
         height: calc(
            var(--calendar_item-size_m_compactDatePicker) - 2 *
               var(--border-thickness)
         );
      }
   }
}

.controls-CompactDatePicker__size-l {
   width: calc(
      7 * var(--calendar_item-size_l_compactDatePicker) + 2 * var(--offset_2xs)
   );

   .controls-MonthViewVDOM__item_style-CompactDatePickerItem {
      width: var(--calendar_item-size_l_compactDatePicker);
      height: var(--calendar_item-size_l_compactDatePicker);
   }

   .controls-MonthViewVDOM__item-border_style-CompactDatePickerItem:hover,
   .controls-MonthView__border-currentMonthDay-unselected_style-CompactDatePickerItem:hover,
   .controls-MonthView__textColor-currentMonthDay-today_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-base_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-start_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-end_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-startend-unfinished_style-CompactDatePickerItem,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-startend_style-CompactDatePickerItem {
      &::before {
         width: calc(
            var(--calendar_item-size_l_compactDatePicker) - 2 *
               var(--border-thickness)
         );
         height: calc(
            var(--calendar_item-size_l_compactDatePicker) - 2 *
               var(--border-thickness)
         );
      }
   }
}

.ws-is-hover {
   .controls-MonthViewVDOM__item-border_style-CompactDatePickerItem:hover,
   .controls-MonthView__border-currentMonthDay-unselected_style-CompactDatePickerItem:hover {
      &::before {
         position: absolute;
         border-radius: 50%;
         content: '';
         box-sizing: border-box;
         border: var(--border-thickness) solid
            var(--unaccented_hover_border-color);
      }
   }

   .controls-MonthViewVDOM__today.controls-MonthView__border-currentMonthDay-unselected_style-CompactDatePickerItem:hover {
      border-color: transparent;
   }

   .controls-CompactDatePicker__item__today {
      .controls-MonthView__textColor-currentMonthDay-today_style-CompactDatePickerItem:hover {
         &::before {
            border: 1.5px solid var(--brand_color);
         }
      }
   }

   .controls-MonthView__backgroundColor-currentMonthDay-selected-start-unfinished_style-CompactDatePickerItem:hover,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-end-unfinished_style-CompactDatePickerItem:hover {
      &::before {
         content: '';
         border: none;
      }
   }

   .controls-MonthView__backgroundColor-currentMonthDay-selected-startend_style-CompactDatePickerItem:hover,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-base_style-CompactDatePickerItem:hover,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-end_style-CompactDatePickerItem:hover,
   .controls-MonthView__backgroundColor-currentMonthDay-selected-start_style-CompactDatePickerItem:hover {
      &::before {
         content: attr(date);
         border: none;
      }
   }
}
